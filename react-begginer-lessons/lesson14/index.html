<body>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js"></script>

    <div id='root'></div>
    <script type="text/babel">
        class NameForm extends React.Component{
            state = {
                error: this.props.getErrorMessage('')
            }
            handleSubmit = event => {
                event.preventDefault();
                const value = event.target.username.value;
                const error = this.props.getErrorMessage(value);

                if(error){
                    alert(`error: ${error}`);
                }else{
                    alert(`success: ${value}`);
                }
            }
        
            handleChange = (event) => {
                const {value} = event.target;
                this.setState({
                    error: this.props.getErrorMessage(value)
                })
            }
            
            render(){
                const {error} = this.state;
                return(
                    <form onSubmit= {this.handleSubmit}>
                        <label>
                            Name:
                            <input onChange = {this.handleChange} type='text' name='username' placeholder='Type something in'/>
                            {error? (
                                <div style= {{color: 'red'}}> {error} </div>
                            ): null}
                        </label>
                        <button disabled= {!!error} type='submit'>
                            Submit
                        </button>
                    </form>
                );
            }
        }
        ReactDOM.render(
        <NameForm
            getErrorMessage = {value => {
                    if(value.length < 3) {
                        return 'value must be atleast 3 characters but its only ' + `${value.length}`;
                    }
                    if(!value.includes('s')){
                        return 'value does not include "s" but it should';
                    }
                    return null;
                }
            }
        />,
         document.getElementById('root'),
         )
    </script>
</body>